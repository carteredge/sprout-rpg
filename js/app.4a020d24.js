(function(e){function t(t){for(var a,c,s=t[0],o=t[1],l=t[2],d=0,h=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&h.push(r[c][0]),r[c]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);u&&u(t);while(h.length)h.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,s=1;s<n.length;s++){var o=n[s];0!==r[o]&&(a=!1)}a&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={app:0},i=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/sprout-rpg/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=o;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0cb5":function(e,t,n){var a=n("24fb");t=a(!1),t.push([e.i,"#app{font-family:sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:center}",""]),e.exports=t},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23");function r(e,t,n,r,i,c){var s=Object(a["l"])("character-page");return Object(a["i"])(),Object(a["c"])(s)}var i=["value"],c={key:1,"aria-label":"Saving, please wait...",class:"saver",disabled:""},s=Object(a["f"])("div",{class:"loader"},null,-1),o=[s],l={class:"loader-container"},u=Object(a["f"])("div",{class:"loader"},null,-1),d=[u];function h(e,t,n,r,s,u){var h=Object(a["l"])("auth-header"),p=Object(a["l"])("character-sheet"),f=Object(a["l"])("character-list");return Object(a["i"])(),Object(a["e"])(a["a"],null,[Object(a["r"])(Object(a["f"])("div",{class:"site-container",onInput:t[1]||(t[1]=function(){return u.resetSaveButton&&u.resetSaveButton.apply(u,arguments)})},[Object(a["g"])(h,{ref:"auth",onAccessTokenChange:u.onAccessTokenChange,onDataReceived:u.onDataReceived,onSave:u.onSave},null,8,["onAccessTokenChange","onDataReceived","onSave"]),s.id?(Object(a["i"])(),Object(a["c"])(p,{key:0,"character-data":s.characterData,ref:"characterSheet",onCharacterChange:u.onDataChanged,onFormSubmit:u.onFormSubmit},null,8,["character-data","onCharacterChange","onFormSubmit"])):(Object(a["i"])(),Object(a["c"])(f,{key:1,characters:s.characterListData},null,8,["characters"])),Object(a["f"])("footer",null,[s.id&&!s.saving?(Object(a["i"])(),Object(a["e"])("input",{key:0,form:"character-sheet",type:"button",value:s.saveButtonLabel,onClick:t[0]||(t[0]=function(){return u.saveCharacter&&u.saveCharacter.apply(u,arguments)})},null,8,i)):Object(a["d"])("",!0),s.saving?(Object(a["i"])(),Object(a["e"])("button",c,o)):Object(a["d"])("",!0)])],544),[[a["p"],s.loaded]]),Object(a["r"])(Object(a["f"])("div",l,d,512),[[a["p"],!s.loaded]])],64)}n("d3b7"),n("3ca3"),n("ddb0"),n("9861"),n("ac1f"),n("841c"),n("99af");var p={class:"header-container"},f=["href"],m={key:1},b={key:3,href:"https://rpg.carteredge.dev/.auth/login/aad"};function v(e,t,n,r,i,c){return Object(a["i"])(),Object(a["e"])("div",p,[Object(a["f"])("header",null,[i.id?(Object(a["i"])(),Object(a["e"])("a",{key:0,href:c.getListURL()},"List",8,f)):(Object(a["i"])(),Object(a["e"])("span",m,"Â ")),i.account.username?(Object(a["i"])(),Object(a["e"])("a",{key:2,href:"#",onClick:t[0]||(t[0]=function(){return c.logout&&c.logout.apply(c,arguments)})},"Log Out "+Object(a["m"])(i.account.username),1)):(Object(a["i"])(),Object(a["e"])("a",b,"Log In"))])])}var g=n("1da1"),j=(n("96cf"),n("b0c0"),n("1b7b")),O={auth:{clientId:"05d08010-ea05-4662-bd1d-78744425b642",authority:"https://login.microsoftonline.com/common"},cache:{cacheLocation:"localStorage"}},y={name:"AuthHeader",created:function(){this.getAccount()},data:function(){var e,t=new URLSearchParams(window.location.search),n=new j["a"](O);return{accessToken:{},account:{},api:"https://rpg.carteredge.dev/api/",characterEndpoint:"characters/",characterData:{},id:null!==(e=t.get("id"))&&void 0!==e?e:"",msalInstance:n,urlParams:t}},methods:{getAccessToken:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={scopes:["api://05d08010-ea05-4662-bd1d-78744425b642/user_impersonation"],state:e.id},t.prev=1,t.next=4,e.msalInstance.handleRedirectPromise();case 4:return t.next=6,e.msalInstance.acquireTokenSilent(n);case 6:a=t.sent,e.setAccessToken(a.idToken),t.next=32;break;case 10:return t.prev=10,t.t0=t["catch"](1),console.error("Silent token acquisition failed. Using interactive mode"),t.prev=13,t.next=16,e.msalInstance.acquireTokenPopup(n);case 16:r=t.sent,e.setAccessToken(r.idToken),t.next=32;break;case 20:return t.prev=20,t.t1=t["catch"](13),t.next=24,e.msalInstance.handleRedirectPromise();case 24:if("BrowserAuthError"!==t.t1.name){t.next=31;break}return t.next=27,e.msalInstance.acquireTokenRedirect(n);case 27:return t.next=29,e.msalInstance.handleRedirectPromise();case 29:i=t.sent,i&&e.setAccessToken(null===i||void 0===i?void 0:i.idToken);case 31:console.error("Token acquisition popup failed:",t.t1.name);case 32:case"end":return t.stop()}}),t,null,[[1,10],[13,20]])})))()},getAccount:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.msalInstance.getAllAccounts(),n.length&&(e.account=n[0]),t.next=4,e.msalInstance.handleRedirectPromise();case 4:if(a=t.sent,!a||!a.idToken){t.next=10;break}e.setAccessToken(a.idToken),e.id||(e.id=null!==(r=a.state)&&void 0!==r?r:""),t.next=12;break;case 10:return t.next=12,e.getAccessToken();case 12:if(e.account){t.next=15;break}return t.next=15,e.login();case 15:e.id&&"0"!==e.id?e.account&&e.getCharacter():e.account&&e.getAllCharacters();case 16:case"end":return t.stop()}}),t)})))()},getAllCharacters:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.account&&e.api&&e.characterEndpoint){t.next=2;break}return t.abrupt("return");case 2:n=new Headers,a="Bearer "+e.accessToken,n.append("Authorization",a),r={method:"GET",headers:n},fetch("".concat(e.api).concat(e.characterEndpoint),r).then((function(e){return e.json()})).then(e.setCharacterData).catch(console.error);case 7:case"end":return t.stop()}}),t)})))()},getCharacter:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.account&&e.api&&e.characterEndpoint&&e.id&&"0"!==e.id){t.next=2;break}return t.abrupt("return");case 2:n=new Headers,a="Bearer "+e.accessToken,n.append("Authorization",a),r={method:"GET",headers:n},fetch("".concat(e.api).concat(e.characterEndpoint).concat(e.id),r).then((function(e){return e.json()})).then(e.setCharacterData).catch(console.error);case 7:case"end":return t.stop()}}),t)})))()},getListURL:function(){return"localhost"===window.location.hostname?"/":"/sprout-rpg/"},login:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.msalInstance.loginPopup({scopes:["User.ReadWrite"]}).then((function(){var t=e.msalInstance.getAllAccounts();e.account=t[0]})).catch((function(e){console.error("error during authentication: ".concat(e))}));case 2:case"end":return t.stop()}}),t)})))()},logout:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.msalInstance.logoutPopup().then((function(){e.account=null})).catch((function(e){console.error(e)}));case 2:case"end":return t.stop()}}),t)})))()},saveCharacter:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.account&&t.api&&t.characterEndpoint){n.next=2;break}return n.abrupt("return");case 2:a=new Headers,r="Bearer "+t.accessToken,a.append("Authorization",r),i={body:e,method:"POST",headers:a},fetch("".concat(t.api).concat(t.characterEndpoint).concat(t.id),i).then((function(e){return e.json()})).then((function(e){return t.$emit("save",e)})).catch(console.error);case 7:case"end":return n.stop()}}),n)})))()},setAccessToken:function(e){this.accessToken=e,this.$emit("accessTokenChange",e)},setCharacterData:function(e){this.characterData=e,this.$emit("dataReceived",e)}}},x=n("6b0d"),C=n.n(x);const V=C()(y,[["render",v]]);var I=V,S=(n("a4d3"),n("e01a"),["href"]),k=Object(a["f"])("br",null,null,-1),w={key:0},A=Object(a["f"])("li",null,[Object(a["f"])("a",{href:"?id=0"},[Object(a["f"])("b",null,"New Character")])],-1);function N(e,t,n,r,i,c){return Object(a["i"])(),Object(a["e"])("ul",null,[(Object(a["i"])(!0),Object(a["e"])(a["a"],null,Object(a["j"])(n.characters,(function(e){return Object(a["i"])(),Object(a["e"])("li",{key:e.id},[Object(a["f"])("a",{href:"?id=".concat(e.id)},[Object(a["f"])("b",null,Object(a["m"])(e.name),1),k,e.description?(Object(a["i"])(),Object(a["e"])("i",w,Object(a["m"])(e.description),1)):Object(a["d"])("",!0)],8,S)])})),128)),A])}var z={name:"CharacterList",props:{characters:{type:Array,required:!1,default:function(){return[]}}}};const D=C()(z,[["render",N]]);var $=D,T={action:"javascript:$emit('formSubmit')",id:"character-sheet",ref:"form"},F={class:"page-container"},P={class:"page"},R=["value"],U={class:"col"},L={class:"row flex-1"},B={class:"col flex-4"},H={class:"page"},q={class:"col"},_={class:"col flex-1"},E={class:"row"},M=Object(a["f"])("h2",null,"Inventory",-1),G=Object(a["f"])("h2",null,"Notes",-1);function J(e,t,n,r,i,c){var s=Object(a["l"])("character-header"),o=Object(a["l"])("stat-box"),l=Object(a["l"])("secondary-stats"),u=Object(a["l"])("archetype-box"),d=Object(a["l"])("box-o-fields");return Object(a["i"])(),Object(a["e"])("form",T,[Object(a["f"])("div",F,[Object(a["f"])("div",P,[Object(a["f"])("input",{type:"hidden",value:i.id},null,8,R),Object(a["g"])(s,{character:i.character,onInput:c.onValueChange},null,8,["character","onInput"]),Object(a["f"])("div",U,[Object(a["f"])("div",L,[Object(a["g"])(o,{character:i.character,onInput:c.onValueChange},null,8,["character","onInput"]),Object(a["g"])(l,{character:i.character,onInput:c.onValueChange,onArrayInput:t[0]||(t[0]=function(e){return c.onArrayValueChange(e.name,e)})},null,8,["character","onInput"])]),Object(a["f"])("div",B,[Object(a["g"])(u,{character:i.character,idx:"0",onInput:c.onArchetypeValueChange},null,8,["character","onInput"]),Object(a["g"])(u,{character:i.character,idx:"1",onInput:c.onArchetypeValueChange},null,8,["character","onInput"])])])]),Object(a["f"])("div",H,[Object(a["f"])("div",q,[Object(a["f"])("div",_,[Object(a["g"])(u,{character:i.character,idx:"2",onInput:c.onArchetypeValueChange},null,8,["character","onInput"]),Object(a["f"])("div",E,[Object(a["g"])(d,{columns:"2",id:"inventory",name:"item",rows:"13",values:i.character.items,onInput:t[1]||(t[1]=function(e){return c.onArrayValueChange("items",e)})},{default:Object(a["q"])((function(){return[M]})),_:1},8,["values"]),Object(a["g"])(d,{columns:"1",id:"notes",name:"note",rows:"13",values:i.character.notes,onInput:t[2]||(t[2]=function(e){return c.onArrayValueChange("notes",e)})},{default:Object(a["q"])((function(){return[G]})),_:1},8,["values"])])])])])])],512)}var W=n("2909"),K=(n("d81d"),n("b64b"),n("00b4"),n("25f0"),n("a9e3"),{class:"card",id:"archetype-card-0"});function Q(e,t,n,r,i,c){var s=Object(a["l"])("box-field"),o=Object(a["l"])("double-field");return Object(a["i"])(),Object(a["e"])("section",K,[Object(a["g"])(s,{bullet:"d8","input-class":"strong tier-1",name:"archetype-".concat(n.idx),"outer-class":"w-50",placeholder:"Archetype",value:i.archetype.name,onInput:c.onArchetypeValueChange},null,8,["name","value","onInput"]),Object(a["g"])(s,{bullet:"d10",indent:"1","input-class":"strong tier-2",name:"specialization-".concat(n.idx,"0"),"outer-class":"w-50",placeholder:"Specialization",value:i.archetype.specializations[0].name,onInput:t[0]||(t[0]=function(e){return c.onSpecializationValueChange(0,e)})},null,8,["name","value"]),Object(a["g"])(o,{bullet:"d12",indent:"2","first-input-class":"strong tier-3","first-name":"signature-".concat(n.idx,"00"),"first-placeholder":"Signature","first-value":i.archetype.specializations[0].signatures[0].name,"second-input-class":"em tier-3","second-name":"signature-description-".concat(n.idx,"00"),"second-placeholder":"Description","second-value":i.archetype.specializations[0].signatures[0].description,onInput:t[1]||(t[1]=function(e){return c.onSignatureValueChange(0,0,e)})},null,8,["first-name","first-value","second-name","second-value"]),Object(a["g"])(o,{indent:"5","first-input-class":"strong tier-3","first-name":"signature-".concat(n.idx,"01"),"first-value":i.archetype.specializations[0].signatures[1].name,"second-input-class":"em tier-3","second-name":"signature-description-".concat(n.idx,"01"),"second-value":i.archetype.specializations[0].signatures[1].description,onInput:t[2]||(t[2]=function(e){return c.onSignatureValueChange(0,1,e)})},null,8,["first-name","first-value","second-name","second-value"]),Object(a["g"])(o,{indent:"5","first-input-class":"strong tier-3","first-name":"signature-".concat(n.idx,"02"),"first-value":i.archetype.specializations[0].signatures[2].name,"second-input-class":"em tier-3","second-name":"signature-description-".concat(n.idx,"02"),"second-value":i.archetype.specializations[0].signatures[2].description,onInput:t[3]||(t[3]=function(e){return c.onSignatureValueChange(0,2,e)})},null,8,["first-name","first-value","second-name","second-value"]),Object(a["g"])(s,{bullet:"d10",indent:"1","input-class":"strong tier-2",name:"specialization-".concat(n.idx,"1"),"outer-class":"w-50",onInput:t[4]||(t[4]=function(e){return c.onSpecializationValueChange(1,e)})},null,8,["name"]),Object(a["g"])(o,{bullet:"d12",indent:"2","first-input-class":"strong tier-3","first-name":"signature-".concat(n.idx,"10"),"first-value":i.archetype.specializations[1].signatures[0].name,"second-input-class":"em tier-3","second-name":"signature-description-".concat(n.idx,"10"),"second-value":i.archetype.specializations[1].signatures[0].description,onInput:t[5]||(t[5]=function(e){return c.onSignatureValueChange(1,0,e)})},null,8,["first-name","first-value","second-name","second-value"]),Object(a["g"])(o,{indent:"5","first-input-class":"strong tier-3","first-name":"signature-".concat(n.idx,"11"),"first-value":i.archetype.specializations[1].signatures[1].name,"second-input-class":"em tier-3","second-name":"signature-description-".concat(n.idx,"11"),"second-value":i.archetype.specializations[1].signatures[1].description,onInput:t[6]||(t[6]=function(e){return c.onSignatureValueChange(1,1,e)})},null,8,["first-name","first-value","second-name","second-value"]),Object(a["g"])(o,{indent:"5","first-input-class":"strong tier-3","first-name":"signature-".concat(n.idx,"12"),"first-value":i.archetype.specializations[1].signatures[2].name,"second-input-class":"em tier-3","second-name":"signature-description-".concat(n.idx,"12"),"second-value":i.archetype.specializations[1].signatures[2].description,onInput:t[7]||(t[7]=function(e){return c.onSignatureValueChange(1,2,e)})},null,8,["first-name","first-value","second-name","second-value"]),Object(a["g"])(s,{bullet:"d10",indent:"1","input-class":"strong tier-2",name:"specialization-".concat(n.idx,"2"),"outer-class":"w-50",onInput:t[8]||(t[8]=function(e){return c.onSpecializationValueChange(2,e)})},null,8,["name"]),Object(a["g"])(o,{bullet:"d12",indent:"2","first-input-class":"strong tier-3","first-name":"signature-".concat(n.idx,"20"),"first-value":i.archetype.specializations[2].signatures[0].name,"second-input-class":"em tier-3","second-name":"signature-description-".concat(n.idx,"20"),"second-value":i.archetype.specializations[2].signatures[0].description,onInput:t[9]||(t[9]=function(e){return c.onSignatureValueChange(2,0,e)})},null,8,["first-name","first-value","second-name","second-value"]),Object(a["g"])(o,{indent:"5","first-input-class":"strong tier-3","first-name":"signature-".concat(n.idx,"21"),"first-value":i.archetype.specializations[2].signatures[1].name,"second-input-class":"em tier-3","second-name":"signature-description-".concat(n.idx,"21"),"second-value":i.archetype.specializations[2].signatures[1].description,onInput:t[10]||(t[10]=function(e){return c.onSignatureValueChange(2,1,e)})},null,8,["first-name","first-value","second-name","second-value"]),Object(a["g"])(o,{indent:"5","first-input-class":"strong tier-3","first-name":"signature-".concat(n.idx,"22"),"first-value":i.archetype.specializations[2].signatures[2].name,"second-input-class":"em tier-3","second-name":"signature-description-".concat(n.idx,"22"),"second-value":i.archetype.specializations[2].signatures[2].description,onInput:t[11]||(t[11]=function(e){return c.onSignatureValueChange(2,2,e)})},null,8,["first-name","first-value","second-name","second-value"])])}var X=["id","name","placeholder","value"];function Y(e,t,n,r,i,c){return Object(a["i"])(),Object(a["e"])("div",{class:Object(a["h"])("row centered-stretch text-field-container ".concat(n.outerClass," ").concat(c.indentClass))},[void 0!==n.bullet?(Object(a["i"])(),Object(a["e"])("span",{key:0,class:Object(a["h"])("die-bullet ".concat(n.bulletClass))},Object(a["m"])(n.bullet),3)):Object(a["d"])("",!0),Object(a["f"])("input",{class:Object(a["h"])("text-field ".concat(n.inputClass)),id:n.name,name:n.name,placeholder:n.placeholder,value:i.internal.value,onInput:t[0]||(t[0]=Object(a["s"])((function(t){return e.$emit("input",t)}),["stop"]))},null,42,X)],2)}var Z={name:"BoxTextField",computed:{indentClass:function(){return this.indent?"idt-".concat(this.indent):""}},data:function(){return{internal:{value:this.value||""}}},props:{bullet:String,bulletClass:{default:"",type:String},indent:{type:[Number,String],validator:function(e){return!isNaN(e)}},inputClass:{type:String,default:""},name:{required:!0,type:String},outerClass:{default:"",type:String},placeholder:{default:"",type:String},value:{default:"",type:String}},watch:{value:function(){this.internal.value=this.value}}};const ee=C()(Z,[["render",Y]]);var te=ee,ne=["id","name","placeholder","value"],ae=["id","name","placeholder","value"];function re(e,t,n,r,i,c){return Object(a["i"])(),Object(a["e"])("div",{class:Object(a["h"])("row centered-stretch text-field-container ".concat(c.indentClass," ").concat(n.outerClass))},[void 0!==n.bullet?(Object(a["i"])(),Object(a["e"])("span",{key:0,class:Object(a["h"])("die-bullet ".concat(n.bulletClass))},Object(a["m"])(n.bullet),3)):Object(a["d"])("",!0),Object(a["f"])("input",{class:Object(a["h"])("text-field ".concat(n.firstInputClass," ").concat(c.firstFlexClass)),id:n.firstName,name:n.firstName,placeholder:n.firstPlaceholder,value:i.internal.firstValue,onInput:t[0]||(t[0]=function(){return c.onFirstInput&&c.onFirstInput.apply(c,arguments)})},null,42,ne),Object(a["f"])("input",{class:Object(a["h"])("text-field ".concat(n.secondInputClass," ").concat(c.secondFlexClass)),id:n.secondName,name:n.secondName,placeholder:n.secondPlaceholder,value:i.internal.secondValue,onInput:t[1]||(t[1]=function(){return c.onSecondInput&&c.onSecondInput.apply(c,arguments)})},null,42,ae)],2)}var ie={name:"DoubleField",computed:{firstFlexClass:function(){return this.firstFlex?"flex-".concat(this.firstFlex):"flex-1"},indentClass:function(){return this.indent?"idt-".concat(this.indent):""},secondFlexClass:function(){return this.secondFlex?"flex-".concat(this.secondFlex):"flex-4"}},data:function(){var e,t;return{internal:{firstValue:null!==(e=this.firstValue)&&void 0!==e?e:"",secondValue:null!==(t=this.secondValue)&&void 0!==t?t:""}}},methods:{onFirstInput:function(e){this._firstValue=e.value,this.$emit("input",{name:"first"|this.firstName,value:e.value})},onSecondInput:function(e){this._secondValue=e.value,this.$emit("input",{name:"second"|this.secondName,value:e.value})}},props:{bullet:String,bulletClass:{default:"",type:String},firstFlex:{type:[Number,String],validator:function(e){return!isNaN(e)}},firstInputClass:{type:String,default:""},firstName:{required:!0,type:String},firstPlaceholder:{default:"",type:String},firstValue:{type:String,default:""},indent:{type:[Number,String],validator:function(e){return!isNaN(e)}},outerClass:{default:"",type:String},secondFlex:{type:[Number,String],validator:function(e){return!isNaN(e)}},secondInputClass:{type:String,default:""},secondName:{required:!0,type:String},secondPlaceholder:{default:"",type:String},secondValue:{type:String,default:""}},watch:{firstValue:function(){var e;this.internal.firstValue=null!==(e=this.firstValue)&&void 0!==e?e:""},secondValue:function(){var e;this.internal.secondValue=null!==(e=this.secondValue)&&void 0!==e?e:""}}};const ce=C()(ie,[["render",re]]);var se=ce,oe={components:{BoxField:te,DoubleField:se},computed:{index:function(){return Number(this.idx)}},data:function(){return{archetype:this.character.archetypes[this.idx]}},methods:{onArchetypeValueChange:function(e){var t,n;this.archetype.name=null!==(t=e.target.value)&&void 0!==t?t:e.value,this.$emit("input",this.index,"archetype",{name:"name",value:null!==(n=e.target.value)&&void 0!==n?n:e.value})},onSignatureValueChange:function(e,t,n){this.archetype.specializations[e].signatures[t][n.name]=n.value,this.$emit("input",this.index,"signature",{name:n.name,signatureIndex:t,specializationIndex:e,value:n.value})},onSpecializationValueChange:function(e,t){var n,a;this.archetype.specializations[e].name=null!==(n=t.target.value)&&void 0!==n?n:t.value,this.$emit("input",this.index,"specialization",{name:"name",specializationIndex:e,value:null!==(a=t.target.value)&&void 0!==a?a:t.value})},setData:function(){this.archetype=this.character.archetypes[this.idx]}},name:"ArchetypeBox",props:{character:{required:!0,type:Object},idx:{required:!0,type:[Number,String],validator:function(e){return!isNaN(e)}}},watch:{"character.archetypes":{deep:!0,handler:function(){this.setData()}}}};const le=C()(oe,[["render",Q]]);var ue=le,de=["id"],he={class:"row flex-1"},pe=["id","name","value","onInput"];function fe(e,t,n,r,i,c){return Object(a["i"])(),Object(a["e"])("section",{class:"card flex-1",id:n.id},[Object(a["k"])(e.$slots,"default"),Object(a["f"])("div",he,[(Object(a["i"])(!0),Object(a["e"])(a["a"],null,Object(a["j"])(c.columnsNumber,(function(e){return Object(a["i"])(),Object(a["e"])("div",{class:"col flex-1",key:e},[(Object(a["i"])(!0),Object(a["e"])(a["a"],null,Object(a["j"])(c.rowsNumber,(function(t){return Object(a["i"])(),Object(a["e"])("div",{class:"row centered-stretch text-field-container",key:t},[Object(a["f"])("input",{class:"text-field",id:"".concat(c.getName(t,e)),name:"".concat(c.getName(t,e)),value:i.dataValues[c.getIndex(t,e)],onInput:function(n){return c.onValueChange(c.getIndex(t,e),n.target.value)}},null,40,pe)])})),128))])})),128))])],8,de)}var me={name:"BoxOFields",computed:{columnsNumber:function(){return Number(this.columns)||0},rowsNumber:function(){return Number(this.rows)||0}},data:function(){var e;return{dataValues:null!==(e=this.values)&&void 0!==e&&e.length?Object(W["a"])(this.values):[]}},methods:{getIndex:function(e,t){return(t-1)*Number(this.rows)+e-1},getName:function(e,t){var n=this.getIndex(e,t);return"".concat(this.name,"-").concat(n)},onValueChange:function(e,t){this.dataValues[e]=t,this.$emit("input",{idx:e,value:t})}},props:{columns:{required:!0,type:[Number,String],validator:function(e){return!isNaN(e)}},header:{default:"",type:String},id:{required:!0,type:String},name:{type:String},rows:{required:!0,type:[Number,String],validator:function(e){return!isNaN(e)}},values:{type:Array}},watch:{values:{deep:!0,handler:function(){var e;this.dataValues=null!==(e=this.values)&&void 0!==e?e:this.dataValues}}}};const be=C()(me,[["render",fe]]);var ve=be,ge=Object(a["f"])("div",{class:"character-sheet-header"},[Object(a["f"])("img",{src:"media/featherlite.svg"})],-1),je={class:"row",id:"character-header"};function Oe(e,t,n,r,i,c){var s=Object(a["l"])("text-field");return Object(a["i"])(),Object(a["e"])(a["a"],null,[ge,Object(a["f"])("section",je,[Object(a["g"])(s,{"class-name":"flex-2","input-class":"text-large",label:"Name",name:"name",modelValue:i.name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.name=e}),onInput:c.onValueChange},null,8,["modelValue","onInput"]),Object(a["g"])(s,{"class-name":"flex-4",label:"Description",name:"description",modelValue:i.description,"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.description=e}),onInput:c.onValueChange},null,8,["modelValue","onInput"]),Object(a["g"])(s,{"class-name":"flex-1",label:"Level",name:"level",modelValue:i.level,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.level=e}),onInput:c.onValueChange},null,8,["modelValue","onInput"])])],64)}var ye=["id","name","placeholder","value"],xe=["for"];function Ce(e,t,n,r,i,c){return Object(a["i"])(),Object(a["e"])("div",{class:Object(a["h"])("text-field-container ".concat(n.className||""))},[Object(a["f"])("input",{class:Object(a["h"])("text-field ".concat(n.inputClass||"")),id:n.name,name:n.name,placeholder:n.placeholder||"",value:n.modelValue,onInput:t[0]||(t[0]=function(t){return e.$emit("update:modelValue",t.target.value)})},null,42,ye),n.label?(Object(a["i"])(),Object(a["e"])("label",{key:0,class:Object(a["h"])("label ".concat(n.labelClass||"")),for:n.name},Object(a["m"])(n.label),11,xe)):Object(a["d"])("",!0)],2)}var Ve={name:"TextField",props:{className:String,inputClass:String,label:String,labelClass:String,modelValue:String,name:String,placeholder:String}};const Ie=C()(Ve,[["render",Ce]]);var Se=Ie,ke={name:"CharacterHeader",components:{TextField:Se},data:function(){var e,t,n;return{description:(null===(e=this.character)||void 0===e?void 0:e.description)||"",level:(null===(t=this.character)||void 0===t?void 0:t.level)||"",name:(null===(n=this.character)||void 0===n?void 0:n.name)||""}},emits:["input"],methods:{onValueChange:function(e){e.stopPropagation();var t=e.target.name,n=e.target.value;this.$emit("input",t,n)},setData:function(){var e,t,n;this.description=(null===(e=this.character)||void 0===e?void 0:e.description)||"",this.level=(null===(t=this.character)||void 0===t?void 0:t.level)||"",this.name=(null===(n=this.character)||void 0===n?void 0:n.name)||""}},props:{character:Object},watch:{character:{deep:!0,handler:function(){this.setData()}}}};const we=C()(ke,[["render",Oe]]);var Ae=we,Ne={class:"row",id:"more-stats"},ze={class:"centered col img-stat-container",id:"def-block"},De=Object(a["f"])("div",{style:{position:"absolute",top:"2px"}},[Object(a["f"])("strong",null,"DEF")],-1),$e={class:"centered col img-stat-container",id:"init-block"},Te=Object(a["f"])("div",{style:{position:"absolute",top:"0px"}},[Object(a["f"])("strong",null,"INIT")],-1),Fe={class:"centered col img-stat-container",id:"hp-block"},Pe=Object(a["f"])("div",{style:{position:"absolute",top:"6px"}},[Object(a["f"])("strong",null,"HP")],-1),Re={class:"injury",style:{position:"absolute",left:"-16.58px",top:"55.38px"}},Ue=Object(a["f"])("span",{class:"injury-mark"},null,-1),Le=Object(a["f"])("span",{class:"injury-text"},"1",-1),Be={class:"injury",style:{position:"absolute",left:"1.80px",top:"87.21px"}},He=Object(a["f"])("span",{class:"injury-mark"},null,-1),qe=Object(a["f"])("span",{class:"injury-text"},"2",-1),_e={class:"injury",style:{position:"absolute",left:"33.62px",top:"105.58px"}},Ee=Object(a["f"])("span",{class:"injury-mark"},null,-1),Me=Object(a["f"])("span",{class:"injury-text"},"3",-1),Ge={class:"injury",style:{position:"absolute",left:"70.38px",top:"105.58px"}},Je=Object(a["f"])("span",{class:"injury-mark"},null,-1),We=Object(a["f"])("span",{class:"injury-text"},"4",-1),Ke={class:"injury",style:{position:"absolute",left:"102.21px",top:"87.21px"}},Qe=Object(a["f"])("span",{class:"injury-mark"},null,-1),Xe=Object(a["f"])("span",{class:"injury-text"},"5",-1),Ye={class:"injury",style:{position:"absolute",left:"120.58px",top:"55.38px"}},Ze=Object(a["f"])("span",{class:"injury-mark"},null,-1),et=Object(a["f"])("span",{class:"injury-text"},"6",-1);function tt(e,t,n,r,i,c){return Object(a["i"])(),Object(a["e"])("section",Ne,[Object(a["f"])("div",ze,[De,Object(a["r"])(Object(a["f"])("input",{class:"other-field text-larger",id:"defense",name:"defense",style:{position:"absolute",top:"42px"},"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.defense=e}),onInput:t[1]||(t[1]=function(){return c.onValueChange&&c.onValueChange.apply(c,arguments)})},null,544),[[a["o"],i.defense]])]),Object(a["f"])("div",$e,[Te,Object(a["r"])(Object(a["f"])("input",{class:"other-field text-larger",id:"initiative",name:"initiative",style:{position:"absolute",top:"49px"},"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.initiative=e}),onInput:t[3]||(t[3]=function(){return c.onValueChange&&c.onValueChange.apply(c,arguments)})},null,544),[[a["o"],i.initiative]])]),Object(a["f"])("div",Fe,[Pe,Object(a["r"])(Object(a["f"])("input",{class:"other-field text-large",id:"hp",name:"hp",style:{position:"absolute",top:"35px"},"onUpdate:modelValue":t[4]||(t[4]=function(e){return i.hp=e}),onInput:t[5]||(t[5]=function(){return c.onValueChange&&c.onValueChange.apply(c,arguments)})},null,544),[[a["o"],i.hp]]),Object(a["r"])(Object(a["f"])("input",{class:"other-field text-large",id:"max-hp",name:"max-hp",style:{position:"absolute",top:"69px"},"onUpdate:modelValue":t[6]||(t[6]=function(e){return i.maxHp=e}),onInput:t[7]||(t[7]=function(){return c.onValueChange&&c.onValueChange.apply(c,arguments)})},null,544),[[a["o"],i.maxHp]]),Object(a["f"])("label",Re,[Object(a["r"])(Object(a["f"])("input",{id:"injury-0",name:"injuries[0]",type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=function(e){return i.injuries[0]=e}),onInput:t[9]||(t[9]=function(e){return c.onArrayValueChange(e,"injuries",0,e.target.checked)})},null,544),[[a["n"],i.injuries[0]]]),Ue,Le]),Object(a["f"])("label",Be,[Object(a["r"])(Object(a["f"])("input",{id:"injury-1",name:"injuries[1]",type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=function(e){return i.injuries[1]=e}),onInput:t[11]||(t[11]=function(e){return c.onArrayValueChange(e,"injuries",1,e.target.checked)})},null,544),[[a["n"],i.injuries[1]]]),He,qe]),Object(a["f"])("label",_e,[Object(a["r"])(Object(a["f"])("input",{id:"injury-2",name:"injuries[2]",type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=function(e){return i.injuries[2]=e}),onInput:t[13]||(t[13]=function(e){return c.onArrayValueChange(e,"injuries",2,e.target.checked)})},null,544),[[a["n"],i.injuries[2]]]),Ee,Me]),Object(a["f"])("label",Ge,[Object(a["r"])(Object(a["f"])("input",{id:"injury-3",name:"injuries[3]",type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=function(e){return i.injuries[3]=e}),onInput:t[15]||(t[15]=function(e){return c.onArrayValueChange(e,"injuries",3,e.target.checked)})},null,544),[[a["n"],i.injuries[3]]]),Je,We]),Object(a["f"])("label",Ke,[Object(a["r"])(Object(a["f"])("input",{id:"injury-4",name:"injuries[4]",type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=function(e){return i.injuries[4]=e}),onInput:t[17]||(t[17]=function(e){return c.onArrayValueChange(e,"injuries",4,e.target.checked)})},null,544),[[a["n"],i.injuries[4]]]),Qe,Xe]),Object(a["f"])("label",Ye,[Object(a["r"])(Object(a["f"])("input",{id:"injury-5",name:"injuries[5]",type:"checkbox","onUpdate:modelValue":t[18]||(t[18]=function(e){return i.injuries[5]=e}),onInput:t[19]||(t[19]=function(e){return c.onArrayValueChange(e,"injuries",5,e.target.checked)})},null,544),[[a["n"],i.injuries[5]]]),Ze,et])])])}var nt={name:"SecondaryStats",data:function(){var e,t,n,a,r;return{defense:(null===(e=this.character)||void 0===e?void 0:e.defense)||"",hp:(null===(t=this.character)||void 0===t?void 0:t.hp)||"",initiative:(null===(n=this.character)||void 0===n?void 0:n.initiative)||"",injuries:(null===(a=this.character)||void 0===a?void 0:a.injuries)||[!1,!1,!1,!1,!1,!1],maxHp:(null===(r=this.character)||void 0===r?void 0:r.maxHp)||""}},methods:{onArrayValueChange:function(e,t,n,a){e.stopPropagation(),this.$emit("array-input",{name:t,idx:n,value:a})},onValueChange:function(e){e.stopPropagation();var t=e.target.name,n=e.target.value;this.$emit("input",t,n)},setData:function(){var e,t,n,a,r;this.defense=(null===(e=this.character)||void 0===e?void 0:e.defense)||"",this.hp=(null===(t=this.character)||void 0===t?void 0:t.hp)||"",this.initiative=(null===(n=this.character)||void 0===n?void 0:n.initiative)||"",this.injuries=(null===(a=this.character)||void 0===a?void 0:a.injuries)||[!1,!1,!1,!1,!1,!1],this.maxHp=(null===(r=this.character)||void 0===r?void 0:r.maxHp)||""}},props:{character:Object},watch:{character:{deep:!0,handler:function(){this.setData()}}}};const at=C()(nt,[["render",tt]]);var rt=at,it={class:"col card",id:"stats"},ct={class:"row"},st={class:"row"};function ot(e,t,n,r,i,c){var s=Object(a["l"])("stat-field");return Object(a["i"])(),Object(a["e"])("section",it,[Object(a["f"])("div",ct,[Object(a["g"])(s,{name:"might",label:"Might",modelValue:i.might,"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.might=e}),onInput:c.onValueChange},null,8,["modelValue","onInput"]),Object(a["g"])(s,{name:"agility",label:"Agility",modelValue:i.agility,"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.agility=e}),onInput:c.onValueChange},null,8,["modelValue","onInput"]),Object(a["g"])(s,{name:"focus",label:"Focus",modelValue:i.focus,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.focus=e}),onInput:c.onValueChange},null,8,["modelValue","onInput"])]),Object(a["f"])("div",st,[Object(a["g"])(s,{name:"intellect",label:"Intellect",modelValue:i.intellect,"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.intellect=e}),onInput:c.onValueChange},null,8,["modelValue","onInput"]),Object(a["g"])(s,{name:"spirit",label:"Spirit",modelValue:i.spirit,"onUpdate:modelValue":t[4]||(t[4]=function(e){return i.spirit=e}),onInput:c.onValueChange},null,8,["modelValue","onInput"]),Object(a["g"])(s,{name:"charm",label:"Charm",modelValue:i.charm,"onUpdate:modelValue":t[5]||(t[5]=function(e){return i.charm=e}),onInput:c.onValueChange},null,8,["modelValue","onInput"])])])}var lt={class:"col centered"},ut=["id","name","value"],dt=["for"];function ht(e,t,n,r,i,c){return Object(a["i"])(),Object(a["e"])("div",lt,[Object(a["f"])("input",{id:n.name,name:n.name,class:Object(a["h"])("stat-field ".concat(n.inputClass||"")),value:n.modelValue,onInput:t[0]||(t[0]=function(t){return e.$emit("update:modelValue",t.target.value)})},null,42,ut),Object(a["f"])("label",{class:Object(a["h"])("label ".concat(n.labelClass||"")),for:n.name},Object(a["m"])(n.label),11,dt)])}var pt={name:"StatField",props:{name:String,inputClass:String,label:String,labelClass:String,modelValue:String}};const ft=C()(pt,[["render",ht]]);var mt=ft,bt={name:"StatBox",components:{StatField:mt},data:function(){var e,t,n,a,r,i;return{agility:(null===(e=this.character)||void 0===e?void 0:e.agility)||"",charm:(null===(t=this.character)||void 0===t?void 0:t.charm)||"",focus:(null===(n=this.character)||void 0===n?void 0:n.focus)||"",intellect:(null===(a=this.character)||void 0===a?void 0:a.intellect)||"",might:(null===(r=this.character)||void 0===r?void 0:r.might)||"",spirit:(null===(i=this.character)||void 0===i?void 0:i.spirit)||""}},methods:{onValueChange:function(e){e.stopPropagation();var t=e.target.name,n=e.target.value;this.$emit("input",t,n)},setData:function(){var e,t,n,a,r,i;this.agility=(null===(e=this.character)||void 0===e?void 0:e.agility)||"",this.charm=(null===(t=this.character)||void 0===t?void 0:t.charm)||"",this.focus=(null===(n=this.character)||void 0===n?void 0:n.focus)||"",this.intellect=(null===(a=this.character)||void 0===a?void 0:a.intellect)||"",this.might=(null===(r=this.character)||void 0===r?void 0:r.might)||"",this.spirit=(null===(i=this.character)||void 0===i?void 0:i.spirit)||""}},props:{character:Object},watch:{character:{deep:!0,handler:function(){this.setData()}}}};const vt=C()(bt,[["render",ot]]);var gt=vt,jt={name:"CharacterSheet",components:{ArchetypeBox:ue,BoxOFields:ve,CharacterHeader:Ae,StatBox:gt,SecondaryStats:rt},data:function(){return{character:{archetypes:Object(W["a"])(Array(3)).map((function(){return{name:"",specializations:Object(W["a"])(Array(3)).map((function(){return{name:"",signatures:Object(W["a"])(Array(3)).map((function(){return{name:"",description:""}}))}}))}})),agility:"0",charm:"0",defense:"0",description:"",focus:"0",hp:"",initiative:"0",injuries:Object(W["a"])(Array(6)).map((function(){return!1})),intellect:"0",items:[],level:"",maxHp:"5",might:"0",name:"",notes:[],spirit:"0"},id:""}},methods:{mapData:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var a=n[t];if(/^archetype-\d$/.test(a))this.character.archetypes[/^archetype-(\d)$/.exec(a)[1]].name=e[a];else if(/^specialization-\d\d$/.test(a)){var r=/^specialization-(\d)(\d)$/.exec(a);this.character.archetypes[r[1]].specializations[r[2]].name=e[a]}else if(/^signature-\d\d\d$/.test(a)){var i=/^signature-(\d)(\d)(\d)$/.exec(a);this.character.archetypes[i[1]].specializations[i[2]].signatures[i[3]].name=e[a]}else if(/^signature-description-\d\d\d$/.test(a)){var c=/^signature-description-(\d)(\d)(\d)$/.exec(a);this.character.archetypes[c[1]].specializations[c[2]].signatures[c[3]].description=e[a]}else/^injury-\d$/.test(a)?this.character.injuries[/^injury-(\d)$/.exec(a)[1]]=e[a]:/^item-\d{1,2}$/.test(a)?this.character.items[/^item-(\d{1,2})$/.exec(a)[1]]=e[a]:/^note-\d{1,2}$/.test(a)?this.character.notes[/^note-(\d{1,2})$/.exec(a)[1]]=e[a]:"max-hp"===a?this.character.maxHp=e[a]:this.character[a]=e[a]}},onArchetypeValueChange:function(e,t,n){switch(t){case"archetype":this.character.archetypes[e].name=n.value;break;case"specialization":this.character.archetypes[e].specializations[n.specializationIndex].name=n.value;break;case"signature":this.character.archetypes[e].specializations[n.specializationIndex].signatures[n.signatureIndex][n.name]=n.value;break;default:return}this.$emit("characterChange",this.character)},onArrayValueChange:function(e,t){var n;e&&void 0!==t.idx&&(this.character[e][t.idx]=null!==(n=t.value)&&void 0!==n?n:""),this.$emit("characterChange",this.character)},onValueChange:function(e,t){"agility"===e?this.character.initiative!==this.character.agility&&""!==this.character.initiative&&void 0!==this.character.initiative||(this.character.initiative=t):"level"===e&&(isNaN(t)||this.character.maxHp!==(5*Number(this.character.level)).toString()&&""!==this.character.maxHp&&void 0!==this.character.maxHp||(this.character.maxHp=(5*Number(t)).toString())),e&&(this.character[e]=null!==t&&void 0!==t?t:""),this.$emit("characterChange",this.character)},setCharacterData:function(){this.characterData&&this.mapData(this.characterData)}},mounted:function(){this.setCharacterData()},props:{characterData:Object},watch:{characterData:{deep:!0,handler:function(){this.setCharacterData()}}}};const Ot=C()(jt,[["render",J]]);var yt=Ot,xt={name:"CharacterPage",components:{AuthHeader:I,CharacterList:$,CharacterSheet:yt},data:function(){var e,t=new URLSearchParams(window.location.search);return{accessToken:"",characterData:{},characterListData:[],id:null!==(e=t.get("id"))&&void 0!==e?e:"",loaded:!1,saveButtonLabel:"Save",saving:!1}},methods:{onAccessTokenChange:function(e){this.accessToken=e},onDataChanged:function(e){this.characterData=e,this.resetSaveButton()},onDataReceived:function(e){this.loaded=!0,Array.isArray(e)?this.characterListData=e:this.characterData=e},onFormSubmit:function(){this.saveCharacter()},onSave:function(e){this.saving=!1,e.success?(this.saveButtonLabel="Saved!",e.id&&!this.id&&(window.location.href="".concat(location.protocol,"//").concat(location.host).concat(location.pathname,"?id=").concat(e.id))):this.saveButtonLabel="Error"},resetSaveButton:function(){this.saveButtonLabel="Save"},saveCharacter:function(){this.saving=!0;var e=new URLSearchParams(new FormData(this.$refs.characterSheet.$refs.form));this.$refs.auth.saveCharacter(e)}},mounted:function(){this.loaded="0"===this.id}};const Ct=C()(xt,[["render",h]]);var Vt=Ct,It={name:"App",components:{CharacterPage:Vt}};n("7cc2");const St=C()(It,[["render",r]]);var kt=St;Object(a["b"])(kt).mount("#app")},"71d7":function(e,t,n){var a=n("0cb5");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=n("499e").default;r("20775757",a,!0,{sourceMap:!1,shadowMode:!1})},"7cc2":function(e,t,n){"use strict";n("71d7")}});
//# sourceMappingURL=app.4a020d24.js.map